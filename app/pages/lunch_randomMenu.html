<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>main.html</title>

    <link href="/resources/css/common.css" rel="stylesheet" type="text/css" />
    <link href="/resources/css/style.css"  rel="stylesheet" type="text/css"  />
    <link href="/resources/css/miaps.css"  rel="stylesheet" type="text/css" />
    <link rel="preconnect" href="https://fonts.gstatic.com" />
    
</head>
<body>
    <header>
        <button class="back_btn"></button><span class="title">메뉴 추천</span>
    </header>
  
    <div class="contents_wrap" id="contents_list">
        <br />
        <button class="main_btn mb-10" id="btnRandomMenu">메뉴 추천</button>
        <div class="btn-wrap" id="contents">
         
        </div>
        <br />
    </div>
   
      <script type="text/javascript" src="/resources/js/jquery-3.5.1.min.js"></script>
      <script type="text/javascript" src="/resources/js/handlebars-4.0.11.js"></script>
      <script id="menuList" type="text/x-handlebars-template">
        <!-- 컨텐츠영역 -->
      
            {{#menuList}}
            <div class="round_box" name="food_box" data-food_name="{{name}}" data-food_location="{{location}}"
                 data-food_menutype="{{menuType}}">
              <p class="req_title" >
               {{name}}
              </p>
              <div class="req_dt_wrap">
                <span class="req_dt" >
                 {{location}}
                </span>
                <span class="status col5" >
                 {{menuType}}
                </span>
              </div>
            </div>
            {{/menuList}}
      </script>

    <script type="text/javascript">
      console.log('run!')

      var connectUrl = "http://58.181.28.53:11199/menu/";
			
        // 58.181.28.53:11199/menu/getAllMenu(GET) // addMenu(POST)

          $('#btnRandomMenu').on('click', function(e){
            e.preventDefault();
		        e.stopPropagation();
            var randomParam = {};
            randomParam = {"randomNumber" : 5};

            $.ajax({ 	
                type : 'POST',
                url: connectUrl + 'getRandomMenu' , 
                dataType : 'json' ,
                contentType : 'application/json',
                data : JSON.stringify(randomParam),
                success: function(data) { 
                            var obj = data;
                           
                            var source = $("#menuList").html();
                            var template = Handlebars.compile(source);
                            var res = {
                                menuList : obj.data
                            };
          
                            var html = template(res);
                            console.log(html)
                            $("#contents").empty();
                            $("#contents").append(html);
                } });
          });

          //좌측 상단 뒤로가기 버튼
          $('.back_btn').on('click', function(){
            window.history.back();
          });
    </script>

    
</body>
</html>
